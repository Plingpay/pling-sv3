<!--
  Generated template for the ProfilePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title>Profile</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <div class="avatar-container" (click)="photo.click()">
    <div class="user-avatar">
      <img *ngIf="tmpImage || profile.photo"
           [src]="tmpImage?tmpImage:(userProvider.envVars.API + profile.photo)"
           onError="this.src='assets/imgs/image-error.svg';"/>
      <input type="file" hidden accept="image/x-png,image/heif,image/jpeg" (change)="onPhotoChange(photo.files)" #photo>
      <span class="plus" *ngIf="!profile.photo">+</span>
      <span class="add-photo" *ngIf="!profile.photo">Add photo</span>
    </div>
  </div>
  <div class="user-full-name">
    <h2>{{profile?.full_name}}</h2>
  </div>
  <ion-list>
    <ion-list-header>
      Personal info
    </ion-list-header>
    <ion-item *ngIf="profile.email">
      <div class="item-icon" item-start><img src="assets/icon/mail-gray.svg"/></div>{{profile?.email}}
    </ion-item>
    <ion-item>
      <div class="item-icon" item-start><img src="assets/icon/phone-gray.svg"/></div>{{profile?.phone_number}}
    </ion-item>
  </ion-list>
  <ion-list>
    <ion-list-header>
      Payment info
    </ion-list-header>
    <ion-item>
      <div class="item-icon" item-start><img src="assets/icon/card-gray.svg"/></div>
      <ion-label [ngClass]="{'disabled': !enablePaymentOptions}">Payment method</ion-label>
      <button
        [disabled]="!enablePaymentOptions"
        clear
        item-end
        class="choose-method-button"
        (click)="chooseMethod()"
        *ngIf="profile.payment_method == 0"
      >Choose method</button>
      <ion-label
                 [ngClass]="{'disabled': !enablePaymentOptions, 'payment-method-name': true}"
                 *ngIf="profile.payment_method > 0"
        (click)="chooseMethod()"
                 item-end><div class="container-right">{{methodString}} <ion-icon name="arrow-dropdown"></ion-icon></div>
      </ion-label>
    </ion-item>
    <!--<ion-item>-->
      <!--<div class="item-icon" item-start><img src="assets/icon/cash-gray.svg"/></div>-->
      <!--<ion-label>Withdraw method</ion-label>-->
      <!--<ion-select-->
        <!--[disabled]="!enablePaymentOptions"-->
        <!--[(ngModel)]="profile.withdraw_type"-->
        <!--(ionChange)="saveProfile()"-->
        <!--class="method-selector"-->
        <!--placeholder="Choose option" item-end>-->
        <!--<ion-option *ngFor="let withdrawMethodItem of withdrawMethods" [value]="withdrawMethodItem.id">{{withdrawMethodItem.name}}</ion-option>-->
      <!--</ion-select>-->
    <!--</ion-item>-->
    <!--<ion-item>-->
      <!--<div class="item-icon" item-start><img src="assets/icon/currency-gray.svg"/></div>-->
      <!--<ion-label>Currency</ion-label>-->
      <!--<ion-select-->
        <!--[disabled]="!enablePaymentOptions"-->
        <!--[(ngModel)]="profile.currency"-->
        <!--(ionChange)="saveProfile()"-->
        <!--class="currency-selector" item-end>-->
        <!--<ion-option *ngFor="let currencyItem of currencies">{{currencyItem.currency}}</ion-option>-->
      <!--</ion-select>-->
    <!--</ion-item>-->
  </ion-list>
  <ion-grid>
    <ion-row>
      <ion-col col-12>
        <button
          (click)="logout()"
          ion-button
          clear
          full
          class="logout-button"
        >Log out</button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
